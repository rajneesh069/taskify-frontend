import { useEffect, useState } from "react";

const DarkModeToggle: React.FC = () => {
  const [isDarkMode, setIsDarkMode] = useState<boolean>(
    localStorage.getItem("theme") === "dark" ? true : false
  );

  useEffect(() => {
    if (isDarkMode) {
      document.documentElement.classList.add("dark");
      localStorage.setItem("theme", "dark");
    } else {
      document.documentElement.classList.remove("dark");
      localStorage.setItem("theme", "light");
    }
  }, [isDarkMode]);

  const toggleDarkMode = () => {
    setIsDarkMode(!isDarkMode);
  };

  return (
    <div className="flex justify-end">
      <button
        onClick={toggleDarkMode}
        className="group relative flex aspect-square w-[38px] items-center justify-center rounded-lg border border-stroke bg-white text-dark-5 dark:border-dark-3 dark:bg-white/[.02]"
      >
        <span>
          {isDarkMode ? (
            <svg
              width="18"
              height="18"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M18.5 12C18.5 15.3137 15.8137 18 12.5 18C9.18629 18 6.5 15.3137 6.5 12C6.5 8.68629 9.18629 6 12.5 6C15.8137 6 18.5 8.68629 18.5 12Z"
                fill="currentColor"
              ></path>
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M12.5 1.25C12.9142 1.25 13.25 1.58579 13.25 2V3C13.25 3.41421 12.9142 3.75 12.5 3.75C12.0858 3.75 11.75 3.41421 11.75 3V2C11.75 1.58579 12.0858 1.25 12.5 1.25ZM4.89861 4.39861C5.1915 4.10572 5.66638 4.10572 5.95927 4.39861L6.35211 4.79145C6.645 5.08434 6.645 5.55921 6.35211 5.85211C6.05921 6.145 5.58434 6.145 5.29145 5.85211L4.89861 5.45927C4.60572 5.16638 4.60572 4.6915 4.89861 4.39861ZM20.1011 4.39887C20.394 4.69176 20.394 5.16664 20.1011 5.45953L19.7083 5.85237C19.4154 6.14526 18.9405 6.14526 18.6476 5.85237C18.3547 5.55947 18.3547 5.0846 18.6476 4.79171L19.0405 4.39887C19.3334 4.10598 19.8082 4.10598 20.1011 4.39887ZM1.75 12C1.75 11.5858 2.08579 11.25 2.5 11.25H3.5C3.91421 11.25 4.25 11.5858 4.25 12C4.25 12.4142 3.91421 12.75 3.5 12.75H2.5C2.08579 12.75 1.75 12.4142 1.75 12ZM20.75 12C20.75 11.5858 21.0858 11.25 21.5 11.25H22.5C22.9142 11.25 23.25 11.5858 23.25 12C23.25 12.4142 22.9142 12.75 22.5 12.75H21.5C21.0858 12.75 20.75 12.4142 20.75 12ZM18.6476 18.1476C18.9405 17.8547 19.4154 17.8547 19.7083 18.1476L20.1011 18.5405C20.394 18.8334 20.394 19.3082 20.1011 19.6011C19.8082 19.894 19.3334 19.894 19.0405 19.6011L18.6476 19.2083C18.3547 18.9154 18.3547 18.4405 18.6476 18.1476ZM6.35211 18.1479C6.645 18.4408 6.645 18.9157 6.35211 19.2086L5.95927 19.6014C5.66638 19.8943 5.1915 19.8943 4.89861 19.6014C4.60572 19.3085 4.60572 18.8336 4.89861 18.5407L5.29145 18.1479C5.58434 17.855 6.05921 17.855 6.35211 18.1479ZM12.5 20.25C12.9142 20.25 13.25 20.5858 13.25 21V22C13.25 22.4142 12.9142 22.75 12.5 22.75C12.0858 22.75 11.75 22.4142 11.75 22V21C11.75 20.5858 12.0858 20.25 12.5 20.25Z"
                fill="currentColor"
              ></path>
            </svg>
          ) : (
            <svg
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6.22176 0.290343C6.47196 0.540538 6.56981 0.905128 6.47852 1.24698C6.02149 2.95841 6.46512 4.85587 7.80463 6.19537C9.14413 7.53487 11.0416 7.97851 12.753 7.52148C13.0949 7.43019 13.4595 7.52805 13.7097 7.77824C13.9598 8.02844 14.0577 8.39303 13.9664 8.73487C13.6547 9.90223 13.0406 11.0056 12.1268 11.9194C9.35262 14.6935 4.8548 14.6935 2.08063 11.9194C-0.693543 9.1452 -0.693542 4.64738 2.08063 1.87321C2.99439 0.959446 4.09777 0.34532 5.26513 0.0335818C5.60698 -0.0577083 5.97157 0.0401477 6.22176 0.290343Z"
                fill="currentColor"
                fillRule="evenodd"
                clipRule="evenodd"
              ></path>
            </svg>
          )}
        </span>
      </button>
    </div>
  );
};

export default DarkModeToggle;
